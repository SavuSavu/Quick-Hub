<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Edit (QE) - Client-Side Code Editor</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Quick Edit (QE)</h1>
    </header>

    <div class="toolbar">
        <div class="toolbar-group">
            <button id="import-btn">Import</button>
            <button id="download-btn" disabled>Download Current File</button>
        </div>
        <div class="toolbar-group">
            <button id="new-file-btn">New File</button>
            <button id="new-folder-btn">New Folder</button>
            <button id="download-all-btn">Download Workspace</button>
        </div>
    </div>

    <div class="main-container">
        <div class="file-sidebar">
            <div class="sidebar-header">
                Files <button class="sidebar-toggle">‚Üê</button>
            </div>
            <ul class="file-list" id="file-list"></ul>
        </div>
        <div class="editor-container">
            <div id="monaco-editor"></div>
        </div>
    </div>

    <div class="status-bar">
        <div id="language-mode">No file open</div>
        <div id="cursor-position">Line: 1, Column: 1</div>
    </div>

    <!-- GitHub File Selection Modal -->
    <div class="modal" id="github-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Select Files from GitHub</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div id="repo-info"></div>
            <ul class="repo-file-list" id="repo-file-list"></ul>
            <button id="load-github-files">Load Selected Files</button>
        </div>
    </div>

    <!-- Session Recovery Modal -->
    <div class="modal" id="session-recovery-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Recover Previous Session</h3>
                 <!-- Added a close button for consistency -->
                <button class="modal-close">&times;</button>
            </div>
            <!-- Adjusted padding/margin using standard CSS - remove Tailwind if not used -->
            <div class="modal-body">
                <p class="message">A previous editing session has been detected. Would you like to restore your work?</p>
                <p class="session-details" id="session-details"></p>
                <div class="modal-actions">
                    <button id="new-session-btn" class="button secondary">Start New Session</button>
                    <button id="recover-session-btn" class="button primary">Recover Previous Work</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu" style="display: none;">
        <div class="context-menu-item" data-action="rename">Rename</div>
        <div class="context-menu-item" data-action="delete">Delete</div>
        <div class="context-separator"></div>
        <div class="context-menu-item" data-action="copy">Copy</div>
        <div class="context-menu-item" data-action="cut">Cut</div>
        <div class="context-menu-item" data-action="paste">Paste</div>
    </div>

    <!-- Loading Indicator -->
    <div class="loading-indicator" id="loading">Loading...</div>

    <!-- Message Box -->
    <div class="message-box" id="message-box"></div>

    <!-- New File Modal -->
    <div class="modal" id="new-file-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New File</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="new-file-name">File Name:</label>
                    <input type="text" id="new-file-name" placeholder="e.g., myfile.js">
                </div>
                <div class="form-group">
                    <label for="new-file-folder">Folder:</label>
                    <select id="new-file-folder">
                        <option value="root">Root</option>
                    </select>
                </div>
                <button id="create-file-btn" class="button primary">Create File</button>
            </div>
        </div>
    </div>

    <!-- New Folder Modal -->
    <div class="modal" id="new-folder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Folder</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="new-folder-name">Folder Name:</label>
                    <input type="text" id="new-folder-name" placeholder="e.g., src">
                </div>
                <div class="form-group">
                    <label for="new-folder-parent">Parent Folder:</label>
                    <select id="new-folder-parent">
                        <option value="root">Root</option>
                    </select>
                </div>
                <button id="create-folder-btn" class="button primary">Create Folder</button>
            </div>
        </div>
    </div>

    <!-- Folder Import Modal -->
    <div class="modal" id="folder-import-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Import Folder Structure</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Select a folder to import into your workspace.</p>
                <div class="form-group">
                    <label for="import-folder-parent">Import into:</label>
                    <select id="import-folder-parent">
                        <option value="root">Root</option>
                    </select>
                </div>
                <button id="import-folder-btn" class="button primary">Select Folder to Import</button>
            </div>
        </div>
    </div>

    <!-- Download Workspace Modal -->
    <div class="modal" id="download-workspace-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Download Workspace</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Download all files in your workspace as a ZIP file.</p>
                <div class="form-group">
                    <label for="workspace-name">Workspace Name:</label>
                    <input type="text" id="workspace-name" value="qe-workspace" placeholder="workspace-name">
                </div>
                <button id="download-workspace-btn" class="button primary">Download ZIP</button>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal" id="import-modal">
        <div class="modal-content import-modal-content">
            <div class="modal-header">
                <h3>Import Files or Project</h3>
                <button class="modal-close" id="import-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-option">
                    <label class="import-label">Drag & Drop Files</label>
                    <div id="import-dropzone" class="import-dropzone">
                        <span>Drop files here to import</span>
                    </div>
                </div>
                <div class="import-option">
                    <label for="import-url-input" class="import-label">Import from URL</label>
                    <div class="import-url-group">
                        <input type="text" id="import-url-input" placeholder="Paste or enter a file URL...">
                        <button id="import-url-btn">Import URL</button>
                    </div>
                </div>
                <div class="import-option">
                    <label for="import-repo-input" class="import-label">Import from Repository</label>
                    <div class="import-repo-group">
                        <input type="text" id="import-repo-input" placeholder="GitHub/GitLab repo (e.g., owner/repo)">
                        <button id="import-repo-btn">Import Repo</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Monaco Editor CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/loader.js"></script>
    <!-- JSZip CDN (needed for workspace download) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- Link to the external JavaScript file -->
    <script src="scripts.js" defer></script>
</body>
</html>